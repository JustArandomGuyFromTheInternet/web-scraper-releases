# מסמך אפיון טכני ופונקציונלי – מערכת Shaperz

## 1. מבנה המערכת (ארכיטקטורה)
- **Frontend (PWA):** אפליקציית ווב מותקנת על מסך הבית, מותאמת מובייל, עם קישורים אישיים לכל שגרירה.
- **Backend (שרת ניהול):** API מאובטח, ניהול משתמשות, יעדים, תורים, דוחות, אינטגרציה ל-AI.
- **תחנת סריקה (Scraping Station):** מחשב ייעודי (רצוי ביתי) שמריץ Puppeteer עם session פייסבוק אמיתי, מבצע חילוץ וניתוח.

## 2. תהליך עבודה עיקרי
1. שגרירה מקבלת קישור אישי (token מוצפן) ונכנסת ל-PWA.
2. מזינה קישור לפוסט .
3. הקישור נכנס ל-Queue בשרת.
4. תחנת הסריקה מושכת מה-Queue, מבצעת חילוץ (דרך mbasic.facebook.com), שולחת תוצאות לשרת.
5. השרת מנתח (AI), מעדכן יעדים, שולח התראות, ומעדכן Dashboard.

## 3. רכיבים עיקריים
### 3.1 ממשק שגרירה (PWA)
- קישור אישי (token מזהה, ללא סיסמה)
- מד התקדמות שבועי
- תיבת הדבקת קישור
- העלאת צילום מסך (אופציונלי)
- התראות Push (עמידה ביעד, תזכורות, אישור סריקה)
- UX מינימליסטי: רק "כמה עשיתי" ו"כמה נשאר"

### 3.2 Backend
- REST API מאובטח (JWT לכל שגרירה)
- ניהול משתמשות, יעדים, תורים, דוחות
- אינטגרציה ל-Google Gemini (או OpenAI) לניתוח פוסטים
- Queue למשימות סריקה (Redis/RabbitMQ)
- ניהול session פייסבוק (userDataDir)
- שמירת נתונים ב-DB (MongoDB/Postgres)
- שליחת התראות Push (Firebase/OneSignal)

### 3.3 תחנת סריקה
- מחשב פיזי (רצוי ביתי, לא שרת ענן)
- Puppeteer עם session פייסבוק אמיתי
- סריקה דרך mbasic.facebook.com
- Random Delays, תנועות עכבר אקראיות
- שליחת תוצאות ל-API

### 3.4 Dashboard למנהל
- טבלת סטטוס קהילה (פוסטים, לייקים, תגובות)
- דירוג שגרירות (Engagement)
- ייצוא דוחות (PDF/CSV)
- ניהול יעדים

## 4. הכנות ראשוניות (שלב-שלב)
1. פתיחת חשבון Google Cloud (ל-AI, Push, OAuth)
2. פתיחת חשבון Gmail/Google Workspace
3. רכישת דומיין ואחסון (VPS/Cloud)
4. התקנת תעודת SSL (Let's Encrypt)
5. פתיחת פרויקט ב-GitHub
6. תכנון DB Schema (משתמשות, פוסטים, יעדים, תורים)
7. תכנון API (כולל דוקומנטציה)
8. יצירת wireframes בסיסיים ל-PWA ול-Dashboard
9. הגדרת תהליך CI/CD
10. הגדרת session פייסבוק אמיתי במחשב הסריקה

## 5. המלצות Best Practices
- **סריקה דרך mbasic.facebook.com** – HTML יציב, פחות חסימות
- **Queue עם random delays** – מניעת חסימות בפייסבוק
- **Session אמיתי ב-Puppeteer** – התחברות ידנית פעם בתקופה
- **הפרדת רשת** – שרת ניהול בענן, תחנת סריקה בבית
- **HTTPS בלבד** – כל הממשקים מוצפנים
- **Token אישי לכל שגרירה** – אין סיסמאות, רק קישור אישי
- **Push Notifications** – תזכורות ועדכונים
- **UI מינימליסטי** – לא להעמיס מידע טכני על השגרירה
- **AI Summarization + Classification** – סיכום וסיווג אוטומטי
- **Logging ודוחות** – כל פעולה מתועדת, אפשרות ייצוא

## 6. שלבי פיתוח עיקריים
1. פיתוח Backend (API, DB, Queue, ניהול משתמשות)
2. פיתוח PWA (UI, קישורים אישיים, Progress Bar, העלאת קבצים)
3. פיתוח תחנת סריקה (Puppeteer, ניהול session, שילוב AI)
4. פיתוח Dashboard (טבלאות, דוחות, ייצוא)
5. אינטגרציה מלאה
6. בדיקות אבטחה, ביצועים, UX
7. כתיבת תיעוד והדרכה
8. העלאה לשרתים והפצה

## 7. הערות והמלצות נוספות
- מומלץ להתחיל ב-MVP מינימלי (PWA בסיסי, API, סריקה ידנית)
- כל שגרירה תקבל קישור אישי חד-פעמי (magic link)
- Push Notifications – דורש הרשאה מהמשתמשת (הסבר onboarding)
- תחנת הסריקה – אפשר להריץ על Raspberry Pi/מחשב ישן
- מומלץ להפריד בין DB production ל-DB development
- תעדוף אבטחה ופרטיות – אין לשמור סיסמאות גלויות, הכל מוצפן

---

**בהצלחה! אם תרצה דוגמת DB Schema, דוקומנטציה ל-API, או wireframes – אפשר להוסיף.**
